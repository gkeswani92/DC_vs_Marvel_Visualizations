
<html>
<head>
    <!-- Load D3 from site -->
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

</head>
 
    <!-- CSS (Styling) -->
    <style type="text/css">
            #buttonList{
              margin:0 auto;
            }

                        /* Format X and Y Axis */
            .axis path,
            .axis line {
                fill: none;
                stroke: black;
                shape-rendering: crispEdges;
            }

            .axis text {
                font-family: sans-serif;
                font-size: 11px;
            }
           
    </style>
    <!-- End CSS (Styling) -->


  <body>

<div class="axis">x axis is   y axis is 
</div>
<div> 
        <select id="xbutton" class="xbutton">
          <option value="RELEASE" selected="selected">year</option>
          <option value="Budget">budget</option>
          <option value="rotten_tomato">rotten tomato</option>
        </select>

        <select id="ybutton" class="ybutton">
          <option value="RELEASE" >year</option>
          <option value="Budget" selected="selected">budget</option>
          <option value="rotten_tomato">rotten tomato</option>
        </select>
</div>
<div id="graph1"></div>
<script>



d3.csv("ScatterTestData.csv", function(error, data) {

xselect="RELEASE"
yselect="Budget"
size="ADJUSTED"

  function drawgraph(xselect,yselect){
  height=600
  width=800
  padding =80
  svg=d3.select("#graph1").append("svg").attr("width",width).attr("height",height)
  .attr("class","x-y")
  if (xselect=="RELEASE"){
    xScale=d3.scale.linear().domain([d3.min(data,function(d){return d[xselect]}),d3.max(data,function(d){return d[xselect]})]).range([padding,width-padding])}
  else {xScale=d3.scale.linear().domain([0,d3.max(data,function(d){return d[xselect]})]).range([padding,width-padding])};

  if (yselect=="RELEASE"){yScale=d3.scale.linear().domain([d3.min(data,function(d){return d[yselect]}),d3.max(data,function(d){return d[yselect]})]).range([height-padding,padding])}
  else {yScale=d3.scale.linear().domain([0,d3.max(data,function(d){return d[yselect]})]).range([height-padding,padding])};

  rScale=d3.scale.linear().domain([d3.min(data,function(d){return d[size]}),d3.max(data,function(d){return d[size]})]).range([5,20])

xAxis = d3.svg.axis()
.scale(xScale)
.orient("bottom")

yAxis = d3.svg.axis()
.scale(yScale)
.orient("left")
.ticks(8)
                          
              svg.append("g")
                .attr("class", "axis")
                .attr("transform", "translate(0," + (height - padding) +")")
                .call(xAxis);

            // Add to Y axis
            svg.append("g")
                .attr("class", "axis")
                .attr("transform", "translate(" + padding +",0)")
                .call(yAxis);

circle=svg.selectAll("circle")
                circle
                .data(data)
                .enter()
                .append("circle") 
                .attr("cx", function(d) {
                    return xScale(d[xselect]);  
                })
                .attr("cy", function(d) {
                    return yScale(d[yselect]);  
                })
                .attr("r", function(d) {
                    return rScale(d[size]);  
                })
                .style("opacity",0.5)
                .style("fill",function(d){if (d["COMPANY"]=="DC"){return "red"}
                  else {return "blue"}})




}


drawgraph("RELEASE","Budget")

function xupdate(xbutton){
  svg.selectAll("#x-y").remove();

  xselect=xbutton
  drawgraph(xselect,yselect)

}

function yupdate(ybutton){
  svg.selectAll("#x-y").remove();

  yselect=ybutton
  drawgraph(xselect,yselect)

}

d3.select('#xbutton').on('change', function(a) {
  // Change the current key and call the function to update the colors.
  key = d3.select(this).property('value');
  xupdate(key)})

d3.select('#ybutton').on('change', function(a) {
  // Change the current key and call the function to update the colors.
  key = d3.select(this).property('value');
  yupdate(key)})

})
</script>

</body>
</html>