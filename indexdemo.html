<!DOCTYPE html>
<html>
  <head>
    <!-- Load D3 from site -->
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="http://d3js.org/d3.v3.js"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script>
    <script src="country_locations.js"></script>
    <script src="revenues.js"></script>
    <script src="world_map.js"></script>
  </head>
 
    <!-- CSS (Styling) -->
    <style type="text/css">
            /* Format X and Y Axis */
            .axis path,
            .axis line {
                fill: none;
                stroke: black;
                shape-rendering: crispEdges;
            }

            .axis text {
                font-family: sans-serif;
                font-size: 11px;
            }
    </style>
    <!-- End CSS (Styling) -->


  <body>
    <h2>D3 Scatterplot </h2>
    <p>This is a data visualization using transitions with a scatterplot</p>
    <h4>Click on this text to update chart with new values</h4>
    <h3 id = "xScales">Select X Scale <h3>
    <h3 id = "yScales">Select Y Scale <h3>
    <h3 id = "zScales">Select Size Scale 
        <div> 
        <select id="zdropdown" class="zdropdown" onchange = "updatez()">
            <option value="Rotten_Tomatoes" >Rotten Tomatoes Score</option>
            <option value="BUDGET" selected = "selected" >Budget</option>
        </select>
    </h3>
    </div>                                                                                                                      
    <h3 id = "Scatter"></h3>
  
  <!-- Begin D3 Javascript -->
  <script type="text/javascript">
  //Json Data!

//X scale buttons
var xbuttonNames = ["Year Released", "Rotten Tomatoes Score", "Budget"]

var xbuttons =["xRelease", "xTomato", "xBudget"]



//Y scale buttons
var ybuttonNames = ["Rotten Tomatoes Score", "Budget", "Sales"]

var ybuttons =["yTomato", "yBudget", "ySales"]


//Initial x,y categories
var xselection = "RELEASE"
var yselection = "ADJUSTED"
var zselection = zdropdown.value




  //d3.select("#Scales").append("button").attr(id,"YEAR").text("Year Released");

  var MovieJSON = [{"COMPANY":"DC","FILM":"Superman","RELEASE":"1978","ADJUSTED":"1097039000","Assignment":"Skylar","WORLDWIDE":"300218018","DOMESTIC":"134218018","FOREIGN":"166000000","Rotten_Tomatoes":"93","BUDGET":"55000000","STUDIO":"WB"},
{"COMPANY":"DC","FILM":"Superman II","RELEASE":"1981","ADJUSTED":"312806365","Assignment":"Gaurav","WORLDWIDE":"108185706","DOMESTIC":"108185706","FOREIGN":"","Rotten_Tomatoes":"89","BUDGET":"54000000","STUDIO":"WB"},
{"COMPANY":"DC","FILM":"Superman III","RELEASE":"1983","ADJUSTED":"143405983","Assignment":"Skylar","WORLDWIDE":"59950623","DOMESTIC":"59950623","FOREIGN":"","Rotten_Tomatoes":"26","BUDGET":"39000000","STUDIO":"WB"},
{"COMPANY":"DC","FILM":"Supergirl","RELEASE":"1984","ADJUSTED":"32782737","Assignment":"Gaurav","WORLDWIDE":"14296438","DOMESTIC":"14296438","FOREIGN":"","Rotten_Tomatoes":"7","BUDGET":"35000000","STUDIO":"TriStar"},
{"COMPANY":"Marvel","FILM":"Howard the Duck","RELEASE":"1986","ADJUSTED":"82524005","Assignment":"Peimin","WORLDWIDE":"37962774","DOMESTIC":"16295774","FOREIGN":"21667000","Rotten_Tomatoes":"14","BUDGET":"35000000","STUDIO":"Uni."},
{"COMPANY":"DC","FILM":"Superman IV: The Quest for Peace","RELEASE":"1987","ADJUSTED":"32887350","Assignment":"Skylar","WORLDWIDE":"15681020","DOMESTIC":"","FOREIGN":"","Rotten_Tomatoes":"12","BUDGET":"17000000","STUDIO":"WB"},
{"COMPANY":"DC","FILM":"The Return of Swamp Thing","RELEASE":"1989","ADJUSTED":"370471","Assignment":"Gaurav","WORLDWIDE":"192816","DOMESTIC":"192816","FOREIGN":"","Rotten_Tomatoes":"33","BUDGET":"3000000","STUDIO":"Millimeter"},
{"COMPANY":"Marvel","FILM":"The Punisher","RELEASE":"1989","ADJUSTED":"1024880","Assignment":"Peimin","WORLDWIDE":"533411","DOMESTIC":"","FOREIGN":"533411","Rotten_Tomatoes":"28","BUDGET":"9000000","STUDIO":"NWP"},
{"COMPANY":"DC","FILM":"Batman","RELEASE":"1989","ADJUSTED":"790353880","Assignment":"Skylar","WORLDWIDE":"411348924","DOMESTIC":"251188924","FOREIGN":"160160000","Rotten_Tomatoes":"72","BUDGET":"35000000","STUDIO":"WB"},
{"COMPANY":"Marvel","FILM":"Captain America","RELEASE":"1990","ADJUSTED":"18544","Assignment":"Gaurav","WORLDWIDE":"10173","DOMESTIC":"","FOREIGN":"10173","Rotten_Tomatoes":"9","BUDGET":"10000000","STUDIO":"21st"},
{"COMPANY":"DC","FILM":"Batman Returns","RELEASE":"1992","ADJUSTED":"453103534","Assignment":"Peimin","WORLDWIDE":"266822354","DOMESTIC":"162831698","FOREIGN":"103990656","Rotten_Tomatoes":"80","BUDGET":"80000000","STUDIO":"WB"},
{"COMPANY":"DC","FILM":"Batman: Mask of the Phantasm","RELEASE":"1993","ADJUSTED":"9261892","Assignment":"Skylar","WORLDWIDE":"5617391","DOMESTIC":"5617391","FOREIGN":"","Rotten_Tomatoes":"81","BUDGET":"6000000","STUDIO":"WB"},
{"COMPANY":"DC","FILM":"Batman Forever","RELEASE":"1995","ADJUSTED":"526102812","Assignment":"Gaurav","WORLDWIDE":"336529144","DOMESTIC":"184031112","FOREIGN":"152498032","Rotten_Tomatoes":"41","BUDGET":"100000000","STUDIO":"WB"},
{"COMPANY":"DC","FILM":"Steel","RELEASE":"1997","ADJUSTED":"2539807","Assignment":"Peimin","WORLDWIDE":"1710972","DOMESTIC":"1710972","FOREIGN":"","Rotten_Tomatoes":"12","BUDGET":"16000000","STUDIO":"WB"},
{"COMPANY":"DC","FILM":"Batman & Robin","RELEASE":"1997","ADJUSTED":"353600292","Assignment":"Skylar","WORLDWIDE":"238207122","DOMESTIC":"107325195","FOREIGN":"130881927","Rotten_Tomatoes":"11","BUDGET":"125000000","STUDIO":"WB"},
{"COMPANY":"Marvel","FILM":"Blade","RELEASE":"1998","ADJUSTED":"191745252","Assignment":"Gaurav","WORLDWIDE":"131183530","DOMESTIC":"70087718","FOREIGN":"61095812","Rotten_Tomatoes":"54","BUDGET":"45000000","STUDIO":"New Line"},
{"COMPANY":"Marvel","FILM":"X-Men","RELEASE":"2000","ADJUSTED":"410005182","Assignment":"Peimin","WORLDWIDE":"296339527","DOMESTIC":"157299717","FOREIGN":"139039810","Rotten_Tomatoes":"81","BUDGET":"75000000","STUDIO":"Fox"},
{"COMPANY":"Marvel","FILM":"Blade II","RELEASE":"2002","ADJUSTED":"205287049","Assignment":"Skylar","WORLDWIDE":"155010032","DOMESTIC":"82348319","FOREIGN":"72661713","Rotten_Tomatoes":"57","BUDGET":"54000000","STUDIO":"NL"},
{"COMPANY":"Marvel","FILM":"Spider-Man","RELEASE":"2002","ADJUSTED":"1088227139","Assignment":"Gaurav","WORLDWIDE":"821708551","DOMESTIC":"403706375","FOREIGN":"418002176","Rotten_Tomatoes":"89","BUDGET":"139000000","STUDIO":"Colombia"},
{"COMPANY":"Marvel","FILM":"Daredevil","RELEASE":"2003","ADJUSTED":"232008521","Assignment":"Peimin","WORLDWIDE":"179179718","DOMESTIC":"102543518","FOREIGN":"76636200","Rotten_Tomatoes":"44","BUDGET":"78000000","STUDIO":"Fox"},
{"COMPANY":"DC","FILM":"League of Extraordinary Gentlemen","RELEASE":"2003","ADJUSTED":"232119211","Assignment":"Skylar","WORLDWIDE":"179265204","DOMESTIC":"66465204","FOREIGN":"112800000","Rotten_Tomatoes":"17","BUDGET":"78000000","STUDIO":"Fox"},
{"COMPANY":"Marvel","FILM":"Hulk","RELEASE":"2003","ADJUSTED":"317701817","Assignment":"Gaurav","WORLDWIDE":"245360480","DOMESTIC":"132177234","FOREIGN":"113183246","Rotten_Tomatoes":"61","BUDGET":"120000000","STUDIO":"Uni."},
{"COMPANY":"Marvel","FILM":"X2: X-Men United","RELEASE":"2003","ADJUSTED":"527919981","Assignment":"Peimin","WORLDWIDE":"407711549","DOMESTIC":"214949694","FOREIGN":"192761855","Rotten_Tomatoes":"86","BUDGET":"110000000","STUDIO":"Fox"},
{"COMPANY":"Marvel","FILM":"The Punisher","RELEASE":"2004","ADJUSTED":"68990471","Assignment":"Skylar","WORLDWIDE":"54700105","DOMESTIC":"33810189","FOREIGN":"20889916","Rotten_Tomatoes":"29","BUDGET":"33000000","STUDIO":"Lions"},
{"COMPANY":"DC","FILM":"Catwoman","RELEASE":"2004","ADJUSTED":"103551571","Assignment":"Gaurav","WORLDWIDE":"82102379","DOMESTIC":"40202379","FOREIGN":"41900000","Rotten_Tomatoes":"9","BUDGET":"100000000","STUDIO":"WB"},
{"COMPANY":"Marvel","FILM":"Blade: Trinity","RELEASE":"2004","ADJUSTED":"162581808","Assignment":"Peimin","WORLDWIDE":"128905366","DOMESTIC":"52411906","FOREIGN":"76493460","Rotten_Tomatoes":"25","BUDGET":"65000000","STUDIO":"NL"},
{"COMPANY":"Marvel","FILM":"Spider-Man 2","RELEASE":"2004","ADJUSTED":"988524779","Assignment":"Skylar","WORLDWIDE":"783766341","DOMESTIC":"373585825","FOREIGN":"410180516","Rotten_Tomatoes":"93","BUDGET":"200000000","STUDIO":"Sony"},
{"COMPANY":"Marvel","FILM":"Elektra","RELEASE":"2005","ADJUSTED":"69146867","Assignment":"Gaurav","WORLDWIDE":"56681566","DOMESTIC":"24409722","FOREIGN":"32271844","Rotten_Tomatoes":"10","BUDGET":"43000000","STUDIO":"Fox"},
{"COMPANY":"DC","FILM":"V for Vendetta","RELEASE":"2005","ADJUSTED":"161652607","Assignment":"Peimin","WORLDWIDE":"132511035","DOMESTIC":"70511035","FOREIGN":"62000000","Rotten_Tomatoes":"73","BUDGET":"54000000","STUDIO":"WB"},
{"COMPANY":"DC","FILM":"Constantine","RELEASE":"2005","ADJUSTED":"281660453","Assignment":"Skylar","WORLDWIDE":"230884728","DOMESTIC":"75976178","FOREIGN":"154908550","Rotten_Tomatoes":"46","BUDGET":"100000000","STUDIO":"WB"},
{"COMPANY":"Marvel","FILM":"Fantastic Four","RELEASE":"2005","ADJUSTED":"403280174","Assignment":"Gaurav","WORLDWIDE":"330579719","DOMESTIC":"154696080","FOREIGN":"175883639","Rotten_Tomatoes":"9","BUDGET":"120000000","STUDIO":"Fox"},
{"COMPANY":"DC","FILM":"Batman Begins","RELEASE":"2005","ADJUSTED":"456516123","Assignment":"Peimin","WORLDWIDE":"374218673","DOMESTIC":"206852432","FOREIGN":"167366241","Rotten_Tomatoes":"85","BUDGET":"150000000","STUDIO":"WB"},
{"COMPANY":"DC","FILM":"Superman Returns","RELEASE":"2006","ADJUSTED":"462178046","Assignment":"Skylar","WORLDWIDE":"391081192","DOMESTIC":"200081192","FOREIGN":"191000000","Rotten_Tomatoes":"76","BUDGET":"270000000","STUDIO":"WB"},
{"COMPANY":"Marvel","FILM":"X-Men: The Last Stand","RELEASE":"2006","ADJUSTED":"542869117","Assignment":"Gaurav","WORLDWIDE":"459359555","DOMESTIC":"234362462","FOREIGN":"224997093","Rotten_Tomatoes":"58","BUDGET":"168000000","STUDIO":"Fox"},
{"COMPANY":"Marvel","FILM":"Ghost Rider","RELEASE":"2007","ADJUSTED":"262835905","Assignment":"Peimin","WORLDWIDE":"228738393","DOMESTIC":"115802596","FOREIGN":"112935797","Rotten_Tomatoes":"26","BUDGET":"110000000","STUDIO":"Sony"},
{"COMPANY":"Marvel","FILM":"Fantastic Four: Rise of the Silver Surfer","RELEASE":"2007","ADJUSTED":"332135455","Assignment":"Skylar","WORLDWIDE":"289047763","DOMESTIC":"131921738","FOREIGN":"157126025","Rotten_Tomatoes":"37","BUDGET":"130000000","STUDIO":"Fox"},
{"COMPANY":"Marvel","FILM":"Spider-Man 3","RELEASE":"2007","ADJUSTED":"1023671832","Assignment":"Gaurav","WORLDWIDE":"890871626","DOMESTIC":"336530303","FOREIGN":"554341323","Rotten_Tomatoes":"63","BUDGET":"250000000","STUDIO":"Colomnia"},
{"COMPANY":"Marvel","FILM":"Punisher: War Zone","RELEASE":"2008","ADJUSTED":"11176498","Assignment":"Peimin","WORLDWIDE":"10100036","DOMESTIC":"8050977","FOREIGN":"2049059","Rotten_Tomatoes":"27","BUDGET":"35000000","STUDIO":"LGF"},
{"COMPANY":"DC","FILM":"The Spirit","RELEASE":"2008","ADJUSTED":"43191298","Assignment":"Skylar","WORLDWIDE":"39031337","DOMESTIC":"19806188","FOREIGN":"19225149","Rotten_Tomatoes":"14","BUDGET":"60000000","STUDIO":"LGF"},
{"COMPANY":"Marvel","FILM":"The Incredible Hulk","RELEASE":"2008","ADJUSTED":"291503667","Assignment":"Gaurav","WORLDWIDE":"263427551","DOMESTIC":"134806913","FOREIGN":"128620638","Rotten_Tomatoes":"67","BUDGET":"150000000","STUDIO":"Uni."},
{"COMPANY":"Marvel","FILM":"Iron Man","RELEASE":"2008","ADJUSTED":"647542108","Assignment":"Peimin","WORLDWIDE":"585174222","DOMESTIC":"318412101","FOREIGN":"266762121","Rotten_Tomatoes":"94","BUDGET":"140000000","STUDIO":"Par."},
{"COMPANY":"DC","FILM":"The Dark Knight","RELEASE":"2008","ADJUSTED":"1111624312","Assignment":"Skylar","WORLDWIDE":"1004558444","DOMESTIC":"534858444","FOREIGN":"469700000","Rotten_Tomatoes":"94","BUDGET":"185000000","STUDIO":"WB"},
{"COMPANY":"DC","FILM":"Watchmen","RELEASE":"2009","ADJUSTED":"205735853","Assignment":"Gaurav","WORLDWIDE":"185258983","DOMESTIC":"107509799","FOREIGN":"77749184","Rotten_Tomatoes":"65","BUDGET":"120000000","STUDIO":"WB"},
{"COMPANY":"Marvel","FILM":"X-Men Origins: Wolverine","RELEASE":"2009","ADJUSTED":"414297894","Assignment":"Peimin","WORLDWIDE":"373062864","DOMESTIC":"179883157","FOREIGN":"193179707","Rotten_Tomatoes":"38","BUDGET":"150000000","STUDIO":"Fox"},
{"COMPANY":"DC","FILM":"Jonah Hex","RELEASE":"2010","ADJUSTED":"11913114","Assignment":"Skylar","WORLDWIDE":"10903312","DOMESTIC":"10547117","FOREIGN":"356195","Rotten_Tomatoes":"12","BUDGET":"47000000","STUDIO":"WB"},
{"COMPANY":"DC","FILM":"The Losers","RELEASE":"2010","ADJUSTED":"32100704","Assignment":"Gaurav","WORLDWIDE":"29379723","DOMESTIC":"23591432","FOREIGN":"5788291","Rotten_Tomatoes":"49","BUDGET":"40000000","STUDIO":"WB"},
{"COMPANY":"Marvel","FILM":"Kick-Ass","RELEASE":"2010","ADJUSTED":"105097366","Assignment":"Peimin","WORLDWIDE":"96188903","DOMESTIC":"48071303","FOREIGN":"48117600","Rotten_Tomatoes":"76","BUDGET":"30000000","STUDIO":"LGF"},
{"COMPANY":"Marvel","FILM":"Iron Man 2","RELEASE":"2010","ADJUSTED":"681718448","Assignment":"Skylar","WORLDWIDE":"623933331","DOMESTIC":"312433331","FOREIGN":"311500000","Rotten_Tomatoes":"72","BUDGET":"200000000","STUDIO":"Par."},
{"COMPANY":"DC","FILM":"Green Lantern","RELEASE":"2011","ADJUSTED":"232861094","Assignment":"Gaurav","WORLDWIDE":"219851172","DOMESTIC":"116601172","FOREIGN":"103250000","Rotten_Tomatoes":"26","BUDGET":"200000000","STUDIO":"WB"},
{"COMPANY":"Marvel","FILM":"X-Men: First Class","RELEASE":"2011","ADJUSTED":"374550200","Assignment":"Peimin","WORLDWIDE":"353624124","DOMESTIC":"146408305","FOREIGN":"207215819","Rotten_Tomatoes":"87","BUDGET":"160000000","STUDIO":"Fox"},
{"COMPANY":"Marvel","FILM":"Captain America: The First Avenger","RELEASE":"2011","ADJUSTED":"392498627","Assignment":"Skylar","WORLDWIDE":"370569774","DOMESTIC":"176654505","FOREIGN":"193915269","Rotten_Tomatoes":"79","BUDGET":"140000000","STUDIO":"Par."},
{"COMPANY":"Marvel","FILM":"Thor","RELEASE":"2011","ADJUSTED":"475915989","Assignment":"Gaurav","WORLDWIDE":"449326618","DOMESTIC":"181030624","FOREIGN":"268295994","Rotten_Tomatoes":"77","BUDGET":"150000000","STUDIO":"WB"},
{"COMPANY":"Marvel","FILM":"Ghost Rider: Spirit of Vengeance","RELEASE":"2012","ADJUSTED":"137561767","Assignment":"Peimin","WORLDWIDE":"132563930","DOMESTIC":"51774002","FOREIGN":"80789928","Rotten_Tomatoes":"17","BUDGET":"57000000","STUDIO":"Sony"},
{"COMPANY":"Marvel","FILM":"The Amazing Spider-Man","RELEASE":"2012","ADJUSTED":"786505660","Assignment":"Skylar","WORLDWIDE":"757930663","DOMESTIC":"262030663","FOREIGN":"495900000","Rotten_Tomatoes":"73","BUDGET":"230000000","STUDIO":"Sony"},
{"COMPANY":"DC","FILM":"The Dark Knight Rises","RELEASE":"2012","ADJUSTED":"1125323899","Assignment":"Gaurav","WORLDWIDE":"1084439099","DOMESTIC":"448139099","FOREIGN":"636300000","Rotten_Tomatoes":"87","BUDGET":"250000000","STUDIO":"Fox"},
{"COMPANY":"Marvel","FILM":"Avengers","RELEASE":"2012","ADJUSTED":"1575847963","Assignment":"Peimin","WORLDWIDE":"1518594910","DOMESTIC":"623357910","FOREIGN":"895237000","Rotten_Tomatoes":"92","BUDGET":"220000000","STUDIO":"BV"},
{"COMPANY":"Marvel","FILM":"Kick-Ass 2","RELEASE":"2013","ADJUSTED":"62177326","Assignment":"Skylar","WORLDWIDE":"60795985","DOMESTIC":"28795985","FOREIGN":"32000000","Rotten_Tomatoes":"31","BUDGET":"28000000","STUDIO":"Uni."},
{"COMPANY":"Marvel","FILM":"The Wolverine","RELEASE":"2013","ADJUSTED":"424253530","Assignment":"Gaurav","WORLDWIDE":"414828246","DOMESTIC":"132556852","FOREIGN":"282271394","Rotten_Tomatoes":"70","BUDGET":"120000000","STUDIO":"BV"},
{"COMPANY":"Marvel","FILM":"Thor: The Dark World","RELEASE":"2013","ADJUSTED":"659433213","Assignment":"Peimin","WORLDWIDE":"644783140","DOMESTIC":"206362140","FOREIGN":"438421000","Rotten_Tomatoes":"66","BUDGET":"170000000","STUDIO":"BV"},
{"COMPANY":"DC","FILM":"Man of Steel","RELEASE":"2013","ADJUSTED":"683224134","Assignment":"Skylar","WORLDWIDE":"668045518","DOMESTIC":"291045518","FOREIGN":"377000000","Rotten_Tomatoes":"55","BUDGET":"225000000","STUDIO":"WB"},
{"COMPANY":"Marvel","FILM":"Iron Man 3","RELEASE":"2013","ADJUSTED":"1243055923","Assignment":"Gaurav","WORLDWIDE":"1215439994","DOMESTIC":"409013994","FOREIGN":"806426000","Rotten_Tomatoes":"79","BUDGET":"200000000","STUDIO":"BV"},
{"COMPANY":"Marvel","FILM":"Guardians of the Galaxy","RELEASE":"2014","ADJUSTED":"418681000","Assignment":"Peimin","WORLDWIDE":"418681000","DOMESTIC":"222281000","FOREIGN":"196400000","Rotten_Tomatoes":"91","BUDGET":"170000000","STUDIO":"BV"},
{"COMPANY":"Marvel","FILM":"The Amazing Spider-Man 2","RELEASE":"2014","ADJUSTED":"708219235","Assignment":"Skylar","WORLDWIDE":"708219235","DOMESTIC":"202778224","FOREIGN":"505441011","Rotten_Tomatoes":"53","BUDGET":"255000000","STUDIO":"Sony"},
{"COMPANY":"Marvel","FILM":"Captain America: The Winter Soldier","RELEASE":"2014","ADJUSTED":"714025900","Assignment":"Gaurav","WORLDWIDE":"714025900","DOMESTIC":"259708900","FOREIGN":"454317000","Rotten_Tomatoes":"89","BUDGET":"170000000","STUDIO":"BV"},
{"COMPANY":"Marvel","FILM":"X-Men: Days of Future Past","RELEASE":"2014","ADJUSTED":"744047433","Assignment":"Peimin","WORLDWIDE":"744047433","DOMESTIC":"232485000","FOREIGN":"511562433","Rotten_Tomatoes":"91","BUDGET":"200000000","STUDIO":"Fox"},
{"COMPANY":"Marvel","FILM":"Avengers: Age of Ultron","RELEASE":"2015","ADJUSTED":"1405413868","Assignment":"Skylar","WORLDWIDE":"1405413868","DOMESTIC":"459005868","FOREIGN":"946408000","Rotten_Tomatoes":"75","BUDGET":"250000000","STUDIO":"BV"},
{"COMPANY":"Marvel","FILM":"Ant-Man","RELEASE":"2015","ADJUSTED":"519250779","Assignment":"Gaurav","WORLDWIDE":"519250779","DOMESTIC":"ï¿½180202163","FOREIGN":"339048616","Rotten_Tomatoes":"80","BUDGET":"130000000","STUDIO":"BV"},
{"COMPANY":"Marvel","FILM":"Fantastic Four","RELEASE":"2015","ADJUSTED":"167977596","Assignment":"Peimin","WORLDWIDE":"167977596","DOMESTIC":"56117548","FOREIGN":"111860048","Rotten_Tomatoes":"9","BUDGET":"120000000","STUDIO":"Fox"},
{"COMPANY":"Marvel","FILM":"Deadpool","RELEASE":"2016","ADJUSTED":"758691328","Assignment":"Skylar","WORLDWIDE":"758691328","DOMESTIC":"360173154","FOREIGN":"398518174","Rotten_Tomatoes":"83","BUDGET":"58000000","STUDIO":"Fox"}];



var minRelease = Number.MAX_SAFE_INTEGER;
var maxRelease = 0;
var minAdjusted = Number.MAX_SAFE_INTEGER;
var maxAdjusted = 0;
var minBudget = Number.MAX_SAFE_INTEGER;
var maxBudget = 0;
var minTomato = Number.MAX_SAFE_INTEGER;
var maxTomato = 0;
var SetMinMax = function(MovieJSON){
    var R
    var A
    var B
    var T
    for(var i = 0; i< MovieJSON.length;i++){
    R = Number(MovieJSON[i].RELEASE);
    if (R < minRelease){
        minRelease = R;
    }
    if (R > maxRelease) {
        maxRelease = R;
    }
    A = Number(MovieJSON[i].ADJUSTED);
    if (A < minAdjusted){
        minAdjusted = A;
    }
    if (A > maxAdjusted) {
        maxAdjusted = A;
    }
    B = Number(MovieJSON[i].BUDGET);
    if (B < minBudget){
        minBudget = B;
    }
    if (B > maxBudget) {
        maxBudget = B;
    }
    T = Number(MovieJSON[i].Rotten_Tomatoes);
    if (T < minTomato){
        minTomato = T;
    }
    if (T > maxTomato) {
        maxTomato = T;
}}};

SetMinMax(MovieJSON);


//get range widths for each field
AdjustedRange = maxAdjusted-minAdjusted;
BudgetRange = maxBudget-minBudget;
ReleaseRange = maxRelease-minRelease;
TomatoRange = maxTomato-minTomato;


//Min and Max for x domain (intialize to Release Year)
var Minx = minRelease - .1*ReleaseRange;
var Maxx = maxRelease + .1*ReleaseRange;

//Min and Max for y domain (intialize to Adjusted Sales)
var Miny = 0;
var Maxy = maxAdjusted + .1*AdjustedRange;


var LoadData = function(s1, s2, s3) {
    //empty MoviePoints array
    var MoviePoints = [];
    for (var i = 0; i<MovieJSON.length;i++){
        var obj = MovieJSON[i];
        MoviePoints.push([obj.FILM, obj.COMPANY, Number(obj[s1]), Number(obj[s2]), Number(obj[s3])])
    }
    return MoviePoints;
}



var updatex = function(d){
    console.log(d.id)
    if(d.id == "xRelease"){
        console.log("releasex");
        xselection = "RELEASE";
        Minx = minRelease - .1*ReleaseRange;
        Maxx = maxRelease + .1*ReleaseRange;
}
    else if (d.id== "xTomato"){
        console.log("Tomatox");
        xselection = "Rotten_Tomatoes";
        Minx = minTomato - .1*TomatoRange;
        Maxx = maxTomato + .1*TomatoRange;}
    else {
        xselection= "BUDGET";
        Minx = minBudget - .1*BudgetRange;
        Maxx = maxBudget + .1*BudgetRange;}

    MoviePoints = LoadData(xselection,yselection,zselection);
    update(MoviePoints)

}



var updatey = function(d){
    
    if(d.id == "yBudget"){
        yselection = "BUDGET";
        Miny = minBudget - .1*BudgetRange;
        Maxy = maxBudget + .1*BudgetRange;
    }
    else if (d.id == "ySales"){
        yselection = "ADJUSTED";
        Miny = 0;
        Maxy = maxAdjusted + .1*AdjustedRange;}
    else {
        yselection= "Rotten_Tomatoes";
        Miny = minTomato - .1*TomatoRange;
        Maxy = maxTomato + .1*TomatoRange;}
    MoviePoints = LoadData(xselection,yselection,zselection);
    update(MoviePoints);
}

var updatez = function(){
    zselection = zdropdown.value;
     MoviePoints = LoadData(xselection,yselection,zselection);
     update(MoviePoints);
}




//Create x axis Buttons
d3.select("#xScales").selectAll("input").data(xbuttonNames).enter().append("input").attr("type","button").attr("class","xbutton").attr("value", function (d){return d;} );

//Create unique id's
d3.selectAll(".xbutton")[0].forEach(function(d,i){ d.setAttribute("id",xbuttons[i])});

//update chart on click
d3.select("#xRelease").on("click", function(d){updatex(this)});

d3.select("#xTomato").on("click", function(d){updatex(this)});

d3.select("#xBudget").on("click", function(d){updatex(this)});




d3.select("#yScales").selectAll("input").data(ybuttonNames).enter().append("input").attr("type","button").attr("class","ybutton").attr("value", function (d){return d;} );


d3.selectAll(".ybutton")[0].forEach(function(d,i){ d.setAttribute("id",ybuttons[i])});

d3.select("#yTomato").on("click", function(d){updatey(this)});

d3.select("#yBudget").on("click", function(d){updatey(this)});

d3.select("#ySales").on("click", function(d){updatey(this)});


//Have an x scale and y scale been chosen?

MoviePoints = LoadData(xselection,yselection,zselection);




  
    // Setup data
            //var dataset = [];  // Initialize empty array
            //var numDataPoints = 15;  // Number of dummy data points
            //var maxRange = Math.random() * 1000;  // Max range of new values
            //for(var i=0; i<numDataPoints; i++) {
             //   var newNumber1 = Math.floor(Math.random() * maxRange);  // New random integer
              //  var newNumber2 = Math.floor(Math.random() * maxRange);  // New random integer
               // dataset.push([newNumber1, newNumber2]);  // Add new number to array
           // }


//Get min year test))




            // Setup settings for graphic
            var canvas_width = 800;
            var canvas_height = 500;
            var padding = 100;  // for chart edges


              // Create scale functions for RELEASE year
            var xScale = d3.scale.linear()  // xScale is width of graphic
                            .domain([Minx,Maxx])
                            .range([padding, canvas_width - padding * 2]); // output range

            // Create scale functions
            //var xScale = d3.scale.linear()  // xScale is width of graphic
              //              .domain([0, d3.max(MoviePoints, function(d) {
                   //             return d[2];  // input domain
                //            })])
                  //          .range([padding, canvas_width - padding * 2]); // output range

            var yScale = d3.scale.linear()  // yScale is height of graphic
                            .domain([Miny, Maxy])
                            .range([canvas_height - padding, padding]);  // remember y starts on top going down so we flip

            // Define X axis
            var xAxis = d3.svg.axis()
                            .scale(xScale)
                            .orient("bottom")
                            .ticks(8);

            // Define Y axis
            var yAxis = d3.svg.axis()
                            .scale(yScale)
                            .orient("left")
                            .ticks(8);

            // Create SVG element
            var svg = d3.select("#Scatter")  // This is where we put our vis
                .append("svg")
                .attr("width", canvas_width)
                .attr("height", canvas_height)

            // Create Circles
            svg.selectAll("circle")
                .data(MoviePoints)
                .enter()
                .append("circle")  // Add circle svg
                .attr("cx", function(d) {
                    return xScale(d[2]);  // Circle's X
                })
                .attr("cy", function(d) {  // Circle's Y
                    return yScale(d[3]);
                })
                .attr("r", function(d){
                    console.log(d[4])
                    if(zdropdown.value =="Rotten_Tomatoes")
                        {return .1*d[4]}
                    else if(zdropdown.value =="BUDGET")
                        {return .0000001*d[4]}})
                .style("fill", function(d){
                    if (d[1] == "DC"){
                        return "blue";}
                    else {return "red"}})
                    .style("opacity",.6);  // radius

            // Add X axis
            svg.append("g")
                .attr("class", "x axis")
                .attr("transform", "translate(0," + (canvas_height - padding) +")")
                .call(xAxis);

            // Add Y axis
            svg.append("g")
                .attr("class", "y axis")
                .attr("transform", "translate(" + padding +",0)")
                .call(yAxis);
            
            // On click, update with new data




 var update = function(movies){
                


                    // Update scale domains
                    xScale.domain([Minx,Maxx]);
                    yScale.domain([Miny, Maxy]);

                    // Update circles
                    svg.selectAll("circle")
                        .data(MoviePoints)  // Update with new data
                        .transition()  // Transition from old to new
                        .duration(1000)  // Length of animation
                        .each("start", function() {  // Start animation
                            d3.select(this)  // 'this' means the current element
                                .attr("fill", "red")  // Change color
                                .attr("r", function(d,i){return 10*Math.random()});  // Change size
                        })
                        .delay(function(d, i) {
                            return i / movies.length * 500;  // Dynamic delay (i.e. each item delays a little longer)
                        })
                        .ease("linear")  // Transition easing - default 'variable' (i.e. has acceleration), also: 'circle', 'elastic', 'bounce', 'linear'
                        .attr("cx", function(d) {
                            return xScale(d[2]);  // Circle's X
                        })
                        .attr("cy", function(d) {
                            return yScale(d[3]);  // Circle's Y
                        })
                        .each("end", function() {  // End animation
                            d3.select(this)  // 'this' means the current element
                                .transition()
                                .duration(500)
                                //.attr("fill", "black")  // Change color
                                .attr("r", function(d){
                            if(zdropdown.value =="Rotten_Tomatoes")
                                 {return .1*d[4]}
                            else if(zdropdown.value =="BUDGET")
                                {return .0007*Math.pow(d[4],.5)}});  // Change radius
                                 });

                        // Update X Axis
                        svg.select(".x.axis")
                            .transition()
                            .duration(1000)
                            .call(xAxis);

                        // Update Y Axis
                        svg.select(".y.axis")
                            .transition()
                            .duration(100)
                            .call(yAxis);
                };
 








            /*d3.select("h4")
                .on("click", function() {
                    var numValues = MoviePoints.length;  // Get original dataset's length
                    var maxRange = Math.random() * 1000;  // Get max range of new values
                    MoviePoints = [];  // Initialize empty array
                    for(var i=0; i<numValues; i++) {
                        var newNumber1 = Math.floor(Math.random() * maxRange);  // Random int for x
                        var newNumber2 = Math.floor(Math.random() * maxRange);  // Random int for y
                        MoviePoints.push(["DC","Super",newNumber1, newNumber2]);  // Add new numbers to array
                    }

                    // Update scale domains
                    xScale.domain([0, d3.max(MoviePoints, function(d) {
                        return d[2]; })]);
                    yScale.domain([0, d3.max(MoviePoints, function(d) {
                        return d[3]; })]);

                    // Update circles
                    svg.selectAll("circle")
                        .data(MoviePoints)  // Update with new data
                        .transition()  // Transition from old to new
                        .duration(1000)  // Length of animation
                        .each("start", function() {  // Start animation
                            d3.select(this)  // 'this' means the current element
                                .attr("fill", "red")  // Change color
                                .attr("r", 5);  // Change size
                        })
                        .delay(function(d, i) {
                            return i / MoviePoints.length * 500;  // Dynamic delay (i.e. each item delays a little longer)
                        })
                        .ease("linear")  // Transition easing - default 'variable' (i.e. has acceleration), also: 'circle', 'elastic', 'bounce', 'linear'
                        .attr("cx", function(d) {
                            return xScale(d[2]);  // Circle's X
                        })
                        .attr("cy", function(d) {
                            return yScale(d[3]);  // Circle's Y
                        })
                        .each("end", function() {  // End animation
                            d3.select(this)  // 'this' means the current element
                                .transition()
                                .duration(500)
                                .attr("fill", "black")  // Change color
                                .attr("r", 2);  // Change radius
                        });

                        // Update X Axis
                        svg.select(".x.axis")
                            .transition()
                            .duration(1000)
                            .call(xAxis);

                        // Update Y Axis
                        svg.select(".y.axis")
                            .transition()
                            .duration(100)
                            .call(yAxis);
                })*/
 
  </script>


        <div id="container" style="position: absolute; width: 100%; height: 1000px;"></div>

        <script>
            console.log(countryData);
            console.log(movieRevenue);

            var map = new Datamap({
                element: document.getElementById('container'),
                fills: {
                    defaultFill: 'rgba(0,0,0,0.4)'
                },
                geographyConfig: {
                    highlightOnHover: true,
                    popupOnHover: true
                }
            });

            var data = ['country', 'revenue','latitude','longitude'];
            var bubbleData = [];
            var total_revenue = 1215439994;

            for (var movie_name in movieRevenue){
                if(movie_name = "Iron Man 3"){
                    if (movieRevenue.hasOwnProperty(movie_name)) {
                        var movie_data = movieRevenue[movie_name];
                        for (var data in movie_data){
                            var country = data;
                            if(countryData.hasOwnProperty(country)){
                                var revenue = movie_data[data];
                                var latitude = countryData[country]["latitude"];
                                var longitude = countryData[country]["longitude"];
                                var obj = {"country":country, "revenue":revenue, "latitude":latitude, "longitude":longitude, radius: revenue * 100 * 3 / total_revenue};
                                bubbleData.push(obj);
                            }
                        }
                    }
                }
            }

            //draw bubbles for the data
            map.bubbles(bubbleData, {
                            popupTemplate: function (geo, data) {
                                   return ['<div class="hoverinfo">' + '',
                                   '<br/>Country: ' +  data.country + '',
                                   '<br/>Revenue: ' +  '$' + data.revenue + '',
                                   '<br/>% Revenue: ' + data.revenue * 100 / total_revenue  + '%',
                                   '</div>'].join('');
                            }
                        });
        </script>

  </body>
</html>